!function($){"use strict";var defaults={url:null,values:null,method:"POST",target:null,traditional:!1,redirectTop:!1};$.redirect=function(url,values,method,target,traditional,redirectTop){var opts=url;if("object"!=typeof url)var opts={url:url,values:values,method:method,target:target,traditional:traditional,redirectTop:redirectTop};var config=$.extend({},defaults,opts),generatedForm=$.redirect.getForm(config.url,config.values,config.method,config.target,config.traditional);$("body",config.redirectTop?window.top.document:void 0).append(generatedForm.form),generatedForm.submit(),generatedForm.form.remove()},$.redirect.getForm=function(url,values,method,target,traditional){method=method&&-1!==["GET","POST","PUT","DELETE"].indexOf(method.toUpperCase())?method.toUpperCase():"POST";var hash=(url=url.split("#"))[1]?"#"+url[1]:"";if(url=url[0],!values){var obj=$.parseUrl(url);url=obj.url,values=obj.params}values=removeNulls(values);var form=$("<form>").attr("method",method).attr("action",url+hash);target&&form.attr("target",target);var submit=form[0].submit;return iterateValues(values,[],form,null,traditional),{form:form,submit:function(){submit.call(form[0])}}},$.parseUrl=function(url){if(-1===url.indexOf("?"))return{url:url,params:{}};var parts=url.split("?"),query_string,elems=parts[1].split("&");url=parts[0];var i,pair,obj={};for(i=0;i<elems.length;i+=1)obj[(pair=elems[i].split("="))[0]]=pair[1];return{url:url,params:obj}};var getInput=function(name,value,parent,array,traditional){var parentString;if(parent.length>0){var i;for(parentString=parent[0],i=1;i<parent.length;i+=1)parentString+="["+parent[i]+"]";name=array&&traditional?parentString:parentString+"["+name+"]"}return $("<input>").attr("type","hidden").attr("name",name).attr("value",value)},iterateValues=function(values,parent,form,isArray,traditional){var i,iterateParent=[];Object.keys(values).forEach((function(i){"object"==typeof values[i]?((iterateParent=parent.slice()).push(i),iterateValues(values[i],iterateParent,form,Array.isArray(values[i]),traditional)):form.append(getInput(i,values[i],parent,isArray,traditional))}))},removeNulls=function(values){for(var propNames=Object.getOwnPropertyNames(values),i=0;i<propNames.length;i++){var propName=propNames[i];null===values[propName]||void 0===values[propName]?delete values[propName]:"object"==typeof values[propName]?values[propName]=removeNulls(values[propName]):values[propName].length<1&&delete values[propName]}return values}}(window.jQuery||window.Zepto||window.jqlite);